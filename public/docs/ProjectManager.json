{"files":[{"content":"import React, { useEffect } from 'react';\nimport {\n  Avatar,\n  Box,\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  DropButton,\n  Heading,\n  Paragraph,\n  Text,\n} from 'grommet';\nimport {\n  Attachment,\n  Chat,\n  Clock,\n  FormAdd,\n  More,\n  Trash,\n  UserAdd,\n} from 'grommet-icons';\nimport moment from 'moment';\nimport useProjectManager from './useProjectManager';\nfunction ProjectBoardStatusColumn({ id, name, tasks }) {\n  return (\n    <Card background=\"light-3\" elevation=\"none\" pad=\"medium\" gap=\"medium\" fill>\n      <Box direction=\"row\" justify=\"between\" align=\"center\" gap=\"medium\">\n        <Heading level={4} margin=\"none\" flex>\n          {name}\n        </Heading>\n        <Box direction=\"row\" gap=\"small\">\n          <Button icon={<FormAdd />} plain />\n          <DropButton icon={<More />} plain />\n        </Box>\n      </Box>\n      <Box gap=\"medium\">\n        {tasks?.map((task) => {\n          return <ProjectBoardTask key={task?.id} {...task} />;\n        })}\n      </Box>\n    </Card>\n  );\n}\n\nfunction ProjectBoardTask({\n  attachments,\n  comments,\n  dueDate,\n  labels,\n  owner,\n  title,\n}) {\n  return (\n    <Card background=\"white\" elevation=\"none\">\n      <CardHeader pad={{ horizontal: 'medium', vertical: 'small' }}>\n        <Box direction=\"row\" justify=\"between\" align=\"center\" gap=\"small\">\n          <Clock size=\"small\" />\n          <Text>{moment(dueDate).format('MMM Do')}</Text>\n        </Box>\n\n        <Button label={<Trash size=\"small\" />} plain />\n      </CardHeader>\n      <CardBody pad={{ horizontal: 'medium', bottom: 'small' }} gap=\"small\">\n        <Heading level={5} margin=\"none\">\n          {title}\n        </Heading>\n        <Box direction=\"row\" gap=\"xsmall\">\n          {labels.map((label) => (\n            <Text key={label?.id} size=\"xsmall\">\n              {label?.name}\n            </Text>\n          ))}\n        </Box>\n      </CardBody>\n      <CardFooter\n        pad={{ horizontal: 'medium', vertical: 'small' }}\n        background=\"light-1\"\n      >\n        <Box direction=\"row\" align=\"baseline\" justify=\"start\" gap=\"small\">\n          <Text size=\"small\">\n            <Attachment size=\"small\" /> {attachments?.length}\n          </Text>\n          <Text size=\"small\">\n            <Chat size=\"small\" /> {comments?.length}\n          </Text>\n        </Box>\n        <Box>\n          {owner ? (\n            <Avatar src={owner?.profile} size=\"small\" />\n          ) : (\n            <Button icon={<UserAdd size=\"small\" />} plain />\n          )}\n        </Box>\n      </CardFooter>\n    </Card>\n  );\n}\n\nexport default function ProjectBoard({\n  match: {\n    params: { projectId },\n  },\n}) {\n  const { project, projectTasksByStatusId, openProject } = useProjectManager();\n\n  useEffect(() => {\n    openProject(projectId);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [projectId]);\n\n  if (!project) {\n    return <Paragraph>Loading…</Paragraph>;\n  }\n\n  return (\n    <Box\n      className=\"ProjectBoard\"\n      direction=\"row\"\n      justify=\"stretch\"\n      pad=\"medium\"\n      gap=\"large\"\n      fill\n    >\n      {project?.statuses?.map((status) => {\n        return (\n          <ProjectBoardStatusColumn\n            key={status?.id}\n            {...status}\n            tasks={projectTasksByStatusId[status?.id]}\n          />\n        );\n      })}\n    </Box>\n  );\n}\n","filename":"ProjectBoard.js","app":"ProjectManager"},{"content":"import React, { lazy, Suspense } from 'react';\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\n\nexport default function ProjectManager() {\n  const ProjectsDashboard = lazy(() => import('./ProjectsDashboard'));\n  const ProjectBoard = lazy(() => import('./ProjectBoard'));\n  const { path } = useRouteMatch();\n\n  return (\n    <Suspense fallback={<p>loading route…</p>}>\n      <Switch>\n        <Route component={ProjectsDashboard} path={path} exact />\n        <Route component={ProjectBoard} path={`${path}/:projectId`} />\n      </Switch>\n    </Suspense>\n  );\n}\n","filename":"ProjectManager.js","app":"ProjectManager"},{"content":"import React from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport {\n  Anchor,\n  Avatar,\n  Box,\n  Button,\n  DropButton,\n  Grid,\n  Heading,\n  Meter,\n  Select,\n  Text,\n  TextInput,\n} from 'grommet';\nimport { More, Search } from 'grommet-icons';\nimport useProjectManager from './useProjectManager';\n\nfunction ProjectShort({ id, name, type, category, progress, ...props }) {\n  const location = useLocation();\n  const history = useHistory();\n  return (\n    <Box flex={false} {...props}>\n      <Grid\n        pad=\"medium\"\n        gap=\"medium\"\n        columns={['auto', 'flex', 'small', 'small', 'small', 'xxsmall']}\n        align=\"center\"\n      >\n        <Box>\n          <Avatar background=\"brand\" height=\"12px\" width=\"24px\">\n            {name[0]}\n          </Avatar>\n        </Box>\n        <Box>\n          <Anchor\n            href={`${location.pathname}/${id}`}\n            onClick={(event) => {\n              event.preventDefault();\n              history.push(`${location.pathname}/${id}`);\n            }}\n          >\n            <Text weight=\"bold\">{name}</Text>\n          </Anchor>\n        </Box>\n        <Box>\n          <Meter type=\"bar\" values={[{ value: progress }]} />\n        </Box>\n        <Box>{category?.name}</Box>\n        <Box>{type}</Box>\n        <Box>\n          <DropButton\n            icon={<More />}\n            dropAlign={{ top: 'bottom', right: 'right' }}\n            dropContent={<Box pad=\"large\" background=\"light-2\" />}\n          />\n        </Box>\n      </Grid>\n    </Box>\n  );\n}\nexport default function ProjectDashboard() {\n  const { projects, categoriesById, projectTypes } = useProjectManager();\n  const currentType = 'All';\n  const onCreate = () => {};\n  return (\n    <Box className=\"ProjectManager\" pad=\"medium\" fill>\n      <Box>\n        <Box\n          direction=\"row\"\n          justify=\"between\"\n          align=\"center\"\n          pad=\"medium\"\n          flex={false}\n        >\n          <Heading level={4} margin=\"none\">\n            Projects\n          </Heading>\n          <Button label=\"Create\" onClick={onCreate} primary />\n        </Box>\n        <Box direction=\"row\" justify=\"between\" pad=\"medium\" flex={false}>\n          <Box flex>\n            <TextInput placeholder=\"Search…\" icon={<Search />} plain />\n          </Box>\n          <Box direction=\"row\">\n            <Select options={['All', ...projectTypes]} value={currentType} />\n          </Box>\n        </Box>\n        <Box overflow=\"auto\">\n          {projects.map((project, index) => {\n            return (\n              <ProjectShort\n                key={project.id}\n                {...project}\n                category={categoriesById[project?.category]}\n                border={index ? { side: 'top' } : null}\n              />\n            );\n          })}\n        </Box>\n      </Box>\n    </Box>\n  );\n}\n","filename":"ProjectsDashboard.js","app":"ProjectManager"},{"content":"export { default } from './ProjectManager'\n","filename":"index.js","app":"ProjectManager"},{"content":"import { useMemo, useState } from 'react';\nimport { chain } from 'lodash';\nimport * as config from './config';\nexport default function useDashboard() {\n  const [projects] = useState(config?.projects);\n  const [categories] = useState(config?.categories);\n  const [statuses] = useState(config?.statuses);\n  const [tasks] = useState(config?.tasks);\n  const [projectId, setProjectId] = useState();\n  const projectTypes = useMemo(() => {\n    return chain(projects).uniqBy('type').map('type').value();\n  }, [projects]);\n  const categoriesById = useMemo(() => {\n    return chain(categories).keyBy('id').value();\n  }, [categories]);\n  const projectsById = useMemo(() => {\n    return chain(projects).keyBy('id').value();\n  }, [projects]);\n  const project = useMemo(() => {\n    return projectsById[projectId];\n  }, [projectId, projectsById]);\n  const tasksByProjectId = useMemo(() => {\n    return chain(tasks).groupBy('projectId').value();\n  }, [tasks]);\n  const projectTasks = useMemo(() => {\n    return tasksByProjectId?.[projectId];\n  }, [projectId, tasksByProjectId]);\n  const projectTasksByStatusId = useMemo(() => {\n    return chain(projectTasks).groupBy('statusId').value();\n  }, [projectTasks]);\n\n  return useMemo(() => {\n    function openProject(id) {\n      setProjectId(id);\n    }\n    return {\n      project,\n      projectId,\n      categories,\n      categoriesById,\n      projects,\n      projectTasks,\n      projectTasksByStatusId,\n      projectTypes,\n      statuses,\n      tasks,\n      tasksByProjectId,\n      openProject,\n    };\n  }, [\n    project,\n    projectId,\n    categories,\n    categoriesById,\n    projects,\n    projectTasks,\n    projectTasksByStatusId,\n    projectTypes,\n    statuses,\n    tasks,\n    tasksByProjectId,\n  ]);\n}\n","filename":"useProjectManager.js","app":"ProjectManager"}]}
